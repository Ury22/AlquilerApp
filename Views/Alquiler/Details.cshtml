@model AlquilerApp.Models.Alquiler

@{
ViewData["Title"] = "Detalles del Contrato";
}

<!-- Carga de Bootstrap y Font Awesome (NOTA: En un proyecto ASP.NET Core real, estos enlaces deberían estar en el _Layout.cshtml) -->

<link href="https://www.google.com/search?q=https://cdn.jsdelivr.net/npm/bootstrap%405.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="https://www.google.com/search?q=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/CD/JzIzxQx9hI7mIqg5f+8/GvYwVqj7tHjT9x5fD+u6W2Zl1sA/r3t9JqU2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Estilos personalizados para la vista de detalles -->

<style>
body {
background-color: #f7f9fc;
font-family: 'Inter', sans-serif;
}
.details-card {
border-top: 8px solid #3b82f6; /* blue-500 /
border-radius: 1rem !important; / rounded-xl /
box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); / shadow-2xl /
}
.card-info-section {
border-radius: 0.5rem; / rounded-lg /
box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08); / shadow-md /
padding: 1.5rem;
}
.card-info-dates {
background-color: #eff6ff; / blue-50 /
border-left: 4px solid #60a5fa; / border-blue-400 /
}
.card-info-financial {
background-color: #ecfdf5; / green-50 /
border-left: 4px solid #4ade80; / border-green-400 /
}
.btn-edit-custom {
font-weight: 700;
padding: 0.75rem 2rem;
border-radius: 0.75rem;
box-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);
transition: all 0.3s;
}
.btn-edit-custom:hover {
transform: scale(1.02);
box-shadow: 0 6px 15px rgba(79, 70, 229, 0.4);
}
.badge-status {
padding: 0.5rem 1rem;
font-size: 1rem;
font-weight: 700;
border-radius: 9999px; / rounded-full */
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
</style>

<!-- Contenedor Principal con Diseño de Ficha -->

<div class="container py-5 d-flex justify-content-center">
<div class="details-card mx-auto p-4 p-md-5 bg-white shadow-lg" style="max-width: 900px;">

    <!-- Cabecera y Título Principal -->
    <header class="mb-5 pb-4 border-bottom border-secondary-subtle d-flex justify-content-between align-items-start">
        <div>
            <h1 class="display-5 fw-bolder text-primary d-flex align-items-center">
                <i class="fas fa-file-invoice me-3 text-primary"></i> @ViewData["Title"]
            </h1>
            <h4 class="h5 text-secondary mt-1 fw-medium">Contrato de Arrendamiento #<span class="fw-bold text-primary">@Html.DisplayFor(model => model.CodAlquiler)</span></h4>
        </div>
        
        <!-- Estado del Contrato Destacado -->
        <div class="text-end p-2 rounded-3 bg-light border border-secondary-subtle">
            <span class="d-block small fw-semibold text-secondary mb-1">Estado Actual:</span>
            @{
                var statusName = Model.Estado?.EstadoNombre;
                var statusClass = statusName == "Activo" ? "bg-success-subtle text-success border border-success-subtle" :
                                  statusName == "Pendiente" ? "bg-warning-subtle text-warning border border-warning-subtle" :
                                  "bg-danger-subtle text-danger border border-danger-subtle";
            }
            <span class="badge badge-status @statusClass">
                @Html.DisplayFor(model => model.Estado!.EstadoNombre)
            </span>
        </div>
    </header>

    <!-- CUERPO DE DETALLES: Estructura de dos columnas con cards -->
    <!-- Responsive Grid: 2 columnas en lg+, 1 columna en móvil/tablet -->
    <div class="row g-4 text-secondary">
        
        <!-- Columna 1: Información del Contrato y Personas -->
        <div class="col-12 col-lg-6">
            <div class="d-flex flex-column gap-4">
                
                <!-- Card de Fechas del Contrato -->
                <div class="card-info-section card-info-dates">
                    <h5 class="h5 fw-bold text-primary mb-4 d-flex align-items-center"><i class="far fa-calendar-alt me-2"></i> Fechas Importantes</h5>
                    <dl class="row g-3">
                        <dt class="col-6 fw-medium text-dark-emphasis border-bottom border-primary-subtle pb-2">@Html.DisplayNameFor(model => model.FechaAlquiler):</dt>
                        <dd class="col-6 fw-semibold text-dark border-bottom border-primary-subtle pb-2 text-end">@Html.DisplayFor(model => model.FechaAlquiler)</dd>

                        <dt class="col-6 fw-medium text-dark-emphasis border-bottom border-primary-subtle pb-2">@Html.DisplayNameFor(model => model.FechaInicio):</dt>
                        <dd class="col-6 fw-semibold text-dark border-bottom border-primary-subtle pb-2 text-end">@Html.DisplayFor(model => model.FechaInicio)</dd>

                        <dt class="col-6 fw-medium text-dark-emphasis">@Html.DisplayNameFor(model => model.FechaFinalizacion):</dt>
                        <dd class="col-6 fw-semibold text-dark text-end">@Html.DisplayFor(model => model.FechaFinalizacion)</dd>
                    </dl>
                </div>
                
                <!-- Card de Partes Involucradas -->
                <div class="card-info-section bg-white border border-secondary-subtle">
                    <h5 class="h5 fw-bold text-dark mb-4 d-flex align-items-center"><i class="fas fa-users me-2"></i> Partes del Acuerdo</h5>
                    <dl class="row g-3">
                        <div class="col-12 border-bottom pb-3">
                            <dt class="fw-medium text-secondary d-flex align-items-center mb-1"><i class="fas fa-user-tie me-2"></i> Propietario:</dt>
                            <dd class="h5 fw-semibold text-dark mt-1">@Html.DisplayFor(model => model.PropietarioPersona!.Nombres) @Html.DisplayFor(model => model.PropietarioPersona!.Apellidos)</dd>
                        </div>
                        
                        <div class="col-12 pt-3">
                            <dt class="fw-medium text-secondary d-flex align-items-center mb-1"><i class="fas fa-user me-2"></i> Inquilino:</dt>
                            <dd class="h5 fw-semibold text-dark mt-1">@Html.DisplayFor(model => model.InquilinoPersona!.Nombres) @Html.DisplayFor(model => model.InquilinoPersona!.Apellidos)</dd>
                        </div>
                    </dl>
                </div>
            </div>
        </div>

        <!-- Columna 2: Información Financiera y Vivienda -->
        <div class="col-12 col-lg-6">
            <div class="d-flex flex-column gap-4">
                
                <!-- Card de Montos Financieros -->
                <div class="card-info-section card-info-financial">
                    <h5 class="h5 fw-bold text-success mb-4 d-flex align-items-center"><i class="fas fa-dollar-sign me-2"></i> Aspectos Financieros</h5>
                    <dl class="row g-3">
                        <div class="col-12 d-flex justify-content-between align-items-center border-bottom border-success-subtle pb-3">
                            <dt class="fw-medium text-secondary">@Html.DisplayNameFor(model => model.CuotaMensual):</dt>
                            <dd class="h3 fw-bolder text-success mb-0">@Html.DisplayFor(model => model.CuotaMensual)</dd>
                        </div>

                        <div class="col-12 d-flex justify-content-between align-items-center pt-3">
                            <dt class="fw-medium text-secondary">@Html.DisplayNameFor(model => model.DepositoGarantia):</dt>
                            <dd class="h4 fw-bold text-success-emphasis mb-0">@Html.DisplayFor(model => model.DepositoGarantia)</dd>
                        </div>
                    </dl>
                </div>
                
                <!-- Card de Vivienda Asociada -->
                <div class="card-info-section bg-white border border-secondary-subtle">
                    <h5 class="h5 fw-bold text-dark mb-4 d-flex align-items-center"><i class="fas fa-home me-2"></i> Vivienda Arrendada</h5>
                    <dl class="row g-3">
                        <div class="col-12">
                            <dt class="fw-medium text-secondary">Código de Vivienda:</dt>
                            <dd class="h5 fw-semibold text-dark mt-1">@Html.DisplayFor(model => model.CodigoVivienda)</dd>
                        </div>
                    </dl>
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- Botones de Acción -->
    <div class="pt-5 border-top border-secondary-subtle mt-5 d-flex flex-column flex-sm-row justify-content-between">
        <a asp-action="Edit" asp-route-id="@Model.CodAlquiler" class="btn btn-primary btn-lg bg-indigo-600 border-0 btn-edit-custom mb-3 mb-sm-0">
            <i class="fas fa-edit me-2"></i> Editar Contrato
        </a>
        <a asp-action="Index" class="btn btn-outline-secondary btn-lg fw-semibold py-3 px-5 rounded-4 shadow-sm d-flex align-items-center justify-content-center">
            <i class="fas fa-arrow-left me-2"></i> Volver a la Lista
        </a>
    </div>
</div>


</div>

@section Scripts {
<!-- Script de Bootstrap (Asumiendo que no está en el layout) -->
<script src="https://www.google.com/search?q=https://cdn.jsdelivr.net/npm/bootstrap%405.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
}