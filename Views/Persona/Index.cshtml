@model IEnumerable<AlquilerApp.Models.Persona>

@{
ViewData["Title"] = "Personas";
}

<!-- Carga de Bootstrap (NOTA: En un proyecto ASP.NET Core real, este enlace debería estar en el _Layout.cshtml) -->

<link href="https://www.google.com/search?q=https://cdn.jsdelivr.net/npm/bootstrap%405.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!-- Opcional: Iconos de Font Awesome para las acciones -->
<link rel="stylesheet" href="https://www.google.com/search?q=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

<div class="container py-5">
<h1 class="h3 fw-bold mb-4 text-dark">Personas</h1>

<!-- Botón Crear Nuevo -->
<p class="mb-4">
    <a asp-action="Create" class="btn btn-primary fw-semibold shadow-sm">
        <i class="fas fa-plus-circle me-1"></i> Crear Nuevo
    </a>
</p>

<!-- Formulario de búsqueda -->
<form asp-controller="Persona" asp-action="Index" method="get" class="mb-4 row g-2">
    <div class="col-12 col-md-4">
        <input type="text" name="SearchString" value="@ViewData["CurrentFilter"]" 
               placeholder="Buscar por nombre o identidad..." 
               class="form-control" />
    </div>
    <div class="col-auto">
        <button type="submit" class="btn btn-outline-secondary shadow-sm">
            <i class="fas fa-search me-1"></i> Buscar
        </button>
    </div>
</form>

<!-- Tabla de Registros (Responsiva) -->
<div class="table-responsive bg-white rounded-3 shadow-lg p-3">
    <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <!-- Encabezados de Columna -->
                <th scope="col" class="px-3">
                    @Html.DisplayNameFor(model => model.Nombres)
                </th>
                <th scope="col" class="px-3 d-none d-sm-table-cell">
                    @Html.DisplayNameFor(model => model.Apellidos)
                </th>
                <th scope="col" class="px-3 d-none d-md-table-cell">
                    @Html.DisplayNameFor(model => model.NumIdentidad)
                </th>
                <th scope="col" class="px-3 d-none d-lg-table-cell">
                    @Html.DisplayNameFor(model => model.Email)
                </th>
                <th scope="col" class="px-3 d-none d-md-table-cell">
                    @Html.DisplayNameFor(model => model.Sexo)
                </th>
                <th scope="col" class="px-3 d-none d-sm-table-cell">
                    @Html.DisplayNameFor(model => model.Ciudad)
                </th>
                <th scope="col" class="px-3 text-center">
                    Acciones
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <!-- Nombres y Apellidos -->
                    <td class="px-3 fw-semibold text-primary">
                        @Html.DisplayFor(modelItem => item.Nombres)
                    </td>
                    <td class="px-3 d-none d-sm-table-cell">
                        @Html.DisplayFor(modelItem => item.Apellidos)
                    </td>
                    
                    <!-- Identidad y Correo -->
                    <td class="px-3 text-muted d-none d-md-table-cell">
                        @Html.DisplayFor(modelItem => item.NumIdentidad)
                    </td>
                    <td class="px-3 d-none d-lg-table-cell">
                        <i class="fas fa-envelope me-1"></i> @Html.DisplayFor(modelItem => item.Email)
                    </td>
                    
                    <!-- Sexo -->
                    <td class="px-3 d-none d-md-table-cell">
                        @Html.DisplayFor(modelItem => item.Sexo!.SexoNombre)
                    </td>
                    
                    <!-- Ciudad y País -->
                    <td class="px-3 d-none d-sm-table-cell">
                        @Html.DisplayFor(modelItem => item.Ciudad!.CiudadNombre) 
                        @if (item.Ciudad?.Pais != null)
                        {
                            <span class="badge bg-secondary text-uppercase ms-1">@Html.DisplayFor(modelItem => item.Ciudad.Pais.PaisNombre)</span>
                        }
                    </td>
                    
                    <!-- Botones de Acción: Se muestran los nombres en todos los tamaños excepto en el más pequeño. -->
                    <td class="px-3 text-center">
                        <div class="d-flex justify-content-center gap-2">
                            <!-- Editar -->
                            <a asp-action="Edit" asp-route-id="@item.NumIdentidad" class="btn btn-sm btn-outline-warning" title="Editar">
                                <i class="fas fa-pencil-alt me-0 me-md-1"></i> <span class="d-none d-md-inline">Editar</span>
                            </a>
                            <!-- Detalles -->
                            <a asp-action="Details" asp-route-id="@item.NumIdentidad" class="btn btn-sm btn-outline-info" title="Detalles">
                                <i class="fas fa-info-circle me-0 me-md-1"></i> <span class="d-none d-md-inline">Detalles</span>
                            </a>
                            <!-- Eliminar -->
                            <a asp-action="Delete" asp-route-id="@item.NumIdentidad" class="btn btn-sm btn-outline-danger" title="Eliminar">
                                <i class="fas fa-trash-alt me-0 me-md-1"></i> <span class="d-none d-md-inline">Eliminar</span>
                            </a>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<!-- Mensaje si no hay registros -->
@if (!Model.Any())
{
    <div class="alert alert-info text-center mt-4" role="alert">
        No se encontraron personas.
    </div>
}


</div>

@section Scripts {

<!-- Script de Bootstrap (Asumiendo que no está en el layout) -->

<script src="https://www.google.com/search?q=https://cdn.jsdelivr.net/npm/bootstrap%405.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

}